import connectMongoDB from"../../../libs/mongodb";import Post from"../../../models/Post";import{NextResponse,NextRequest}from"next/server";export default async function postAPI(req,res){try{if(console.log("Trying connecting to MongoDB....."),await connectMongoDB(),console.log("Finally connected to MongoDB !!!"),"POST"===req.method){try{const postCreated=await Post.create(req.body);console.log("post creation successful"),res.json({postCreated:postCreated})}catch(error){console.log("Error creating Post..."),console.log(error)}console.log("Post created")}else if("GET"===req.method&&"undefined"===req.query.id){console.log("Fetching all the documents...");try{const fetchedPosts=await Post.find({});console.log("Posts finally fetched..."),res.json({fetchedPosts:fetchedPosts})}catch(error){console.log("Error fetching posts"),console.log(error)}}else if("GET"===req.method&&"undefined"!==req.query.id){console.log("Fetching specific post...");try{const specificPost=await Post.findById(req.query.id);console.log("Specific Post fetched successfully"),res.json({specificPost:specificPost})}catch(error){console.log("Error fetching posts"),console.log(error)}}else if("DELETE"===req.method){const id=req.query.id;try{await Post.findByIdAndDelete(id),res.json({"Deleted Item Id":id})}catch(error){console.log("Error Deleting records..."),console.log(error)}}else if("PUT"===req.method)try{const id=req.query.id;console.log(id),await Post.findByIdAndUpdate(id,{title:title,description:description},(function(err,docs){err?console.log(err):console.log("Updated Post : ",docs)}))}catch(error){console.log("Error updating posts..."),console.log(error)}}catch(error){console.log("Some problem connecting to MongoDB..."),console.log(error),res.json({error:error})}}